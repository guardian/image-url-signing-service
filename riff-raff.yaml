regions: [eu-west-1]
stacks: [targeting]

deployments:
  image-url-signing-service:
    type: aws-lambda
    contentDirectory: image-url-signing-service
    parameters:
      bucket: image-url-signing-service-dist
      fileName: image-url-signing-service.zip
      functions:
        CODE:
          filename: image-url-signing-service.zip
          name: image-url-signing-service-CODE-Lambda
        PROD:
          filename: image-url-signing-service.zip
          name: image-url-signing-service-PROD-Lambda
      dependencies:
        - cloudformation
  cloudformation:
    type: cloud-formation
    app: image-url-signing-service
    parameters:
      prependStackToCloudFormationStackName: true
      cloudFormationStackName: image-url-signing-service
      templatePath: cfn.yaml
